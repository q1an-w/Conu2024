(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{6981:function(e,r,s){Promise.resolve().then(s.bind(s,3427))},3427:function(e,r,s){"use strict";s.r(r);var a=s(3827),t=s(1585),l=s(4922),u=s(4090);s(2413),s(8103),s(7015);var n=s(1196);s(197),r.default=function(){let e=new Date("2022-10-01T07:30:00-04:00"),r=new Date("2022-11-30T07:30:00-04:00"),[s,i]=(0,u.useState)(e),[c,m]=(0,u.useState)(r),[o,d]=(0,u.useState)({x:0,y:0}),[p,N]=(0,u.useState)(!0),[v,T]=(0,u.useState)([]),[h,C]=(0,u.useState)({TOTALREPORT:{revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},DAYREPORTARRAY:[{date:0,revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},{date:0,revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0}]}),[k,g]=(0,u.useState)(!1),[y,F]=(0,u.useState)(!1),[w,f]=(0,u.useState)(null),x=e=>{f(e),F(!0)};(0,u.useEffect)(()=>{let e=new URLSearchParams(window.location.search),r=e.get("startDate"),s=e.get("endDate");console.log(new Date(r+"T07:30:00-04:00")),i(new Date(r+"T07:30:00-04:00")),m(new Date(s+"T07:30:00-04:00")),console.log(r)},[]),(0,u.useEffect)(()=>{S(s,c)},[s,c]);let S=async(e,r)=>{try{let s=await (0,t.w)(e,r);console.log("get data called"),console.log(s);let a=await (0,l.O)(s);C(a)}catch(e){console.error("Error truncating data:",e)}},W=e=>{let{revenue:r,loss:s}=e;return{labels:["Revenue","Loss"],datasets:[{data:[r,s],backgroundColor:["#8A9A5B","pink"]}],options:{responsive:!0,maintainAspectRatio:!1,width:"50vw",height:"50vh"}}};return(0,a.jsxs)("div",{className:"App",children:[(0,a.jsx)("h1",{className:"title1",children:"ReTirely Report"}),(0,a.jsxs)("div",{className:"tab-container",children:[(0,a.jsx)("div",{className:"tab-item ".concat(p?"active":""),onClick:()=>N(!0),children:"Total Report"}),(0,a.jsx)("div",{className:"tab-item ".concat(p?"":"active"),onClick:()=>N(!1),children:"Day by Day Report"})]}),p?(0,a.jsxs)("div",{className:"information",children:[(0,a.jsx)("h2",{id:"total-report-title",children:"Total Report"}),(0,a.jsx)("div",{id:"total-report",children:(0,a.jsx)("div",{className:"total-report-item",children:Object.entries(h.TOTALREPORT).map(e=>{let[r,s]=e;return 0!==s&&(0,a.jsxs)("div",{className:"report-item",children:[(0,a.jsxs)("span",{className:"report-key",children:[{date:"Date",revenue:"Revenue",loss:"Loss",revenueNumSmallCar:"Processed Compact Cars",revenueNumMediumCar:"Processed Medium Cars",revenueNumBigCar:"Processed Full-Size Cars",revenueNumTruck1:"Processed Type 1 Trucks",revenueNumTruck2:"Processed Type 2 Trucks",lossNumSmallCar:"Turned-Away Compact Cars",lossNumMediumCar:"Turned-Away Medium Cars",lossNumBigCar:"Turned-Away Full-Size Cars",lossNumTruck1:"Turned-Away Type 1 Trucks",lossNumTruck2:"Turned-Away Type 2 Trucks"}[r],":"]}),(0,a.jsx)("span",{className:"report-value",children:s})]},r)})})}),(0,a.jsx)("div",{id:"graph",children:(0,a.jsx)(n.$I,{data:W(h.TOTALREPORT)})})]}):(0,a.jsx)("div",{className:"dayday",children:h.DAYREPORTARRAY.map(e=>(0,a.jsxs)("div",{className:"daydayblock-expanded",onClick:()=>x(e),children:[(0,a.jsxs)("h3",{children:["Date: ",e.date]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Revenue: ",e.revenue]}),(0,a.jsxs)("p",{children:["Loss: ",e.loss]})]})]},e.date))}),y&&(0,a.jsx)("div",{className:"popup-overlay",children:(0,a.jsxs)("div",{className:"popup",children:[(0,a.jsx)("button",{className:"close-button",onClick:()=>{F(!1),f(null)},children:"Close"}),(0,a.jsxs)("h2",{children:["Report For: ",w.date," "]}),w&&(0,a.jsxs)("div",{className:"report-container",children:[Object.entries(w).map(e=>{let[r,s]=e;return 0!==s&&(0,a.jsxs)("div",{className:"report-item",children:[(0,a.jsxs)("span",{className:"report-key",children:[{date:"Date",revenue:"Revenue",loss:"Loss",revenueNumSmallCar:"Processed Compact Cars",revenueNumMediumCar:"Processed Medium Cars",revenueNumBigCar:"Processed Full-Size Cars",revenueNumTruck1:"Processed Type 1 Trucks",revenueNumTruck2:"Processed Type 2 Trucks",lossNumSmallCar:"Turned-Away Compact Cars",lossNumMediumCar:"Turned-Away Medium Cars",lossNumBigCar:"Turned-Away Full-Size Cars",lossNumTruck1:"Turned-Away Type 1 Trucks",lossNumTruck2:"Turned-Away Type 2 Trucks"}[r],":"]}),(0,a.jsx)("span",{className:"report-value",children:s})]},r)}),(0,a.jsx)("div",{id:"graph",children:(0,a.jsx)(n.$I,{data:W(w)})})]})]})})]})}},9411:function(e,r,s){"use strict";s.d(r,{F:function(){return l}});var a=s(6491),t=s.n(a);let l=async()=>{let e=await fetch("../database/datafile.csv"),r=await e.text(),s=new Blob([r],{type:"text/csv"}),a=new File([s],"sample.csv",{type:"text/csv"});return new Promise((e,r)=>{let s=new FileReader;s.onload=async s=>{let a=s.target.result;t().parse(a,{header:!1,dynamicTyping:!0,complete:r=>{let s=r.data.map(e=>({callDate:u(e[0]),apptDate:u(e[1]),category:e[2]}));s.sort((e,r)=>{let s=e.apptDate-r.apptDate;return 0!==s?s:e.callDate-r.callDate}),e(s)},error:e=>{r(e.message)}})},s.readAsText(a)})},u=e=>{if(!e)return null;let[r,s]=e.split(" "),[a,t,l]=r.split("-"),[u,n]=s.split(":");return new Date(a,t-1,l,u,n)}},4922:function(e,r,s){"use strict";s.d(r,{O:function(){return a}});let a=e=>{let r={servicingTime:30,charge:150},s={servicingTime:30,charge:150},a={servicingTime:30,charge:150},t={servicingTime:60,charge:250},l={servicingTime:120,charge:700},u=[],n={date:"",revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},i={revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},c=[{id:1,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:2,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:3,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:4,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:5,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:6,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:7,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:8,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:9,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:10,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1}],m=e[0].apptDate,o={...n},d=e=>{switch(e.toLowerCase()){case"compact":return"SmallCar";case"medium":return"MediumCar";case"full-size":return"BigCar";case"class 1 truck":return"Truck1";case"class 2 truck":return"Truck2";default:return"UnknownCategory"}},p=e=>{switch(e){case"SmallCar":return r;case"MediumCar":return s;case"BigCar":return a;case"Truck1":return t;case"Truck2":return l;default:return{}}},N=(e,r)=>{let{category:s}=e,a=d(s),t=r?"revenueNum".concat(a):"lossNum".concat(a),{servicingTime:l,charge:u}=p(a);i[r?"revenue":"loss"]+=u,i[t]++},v=(e,r)=>{let{category:s}=e,a=d(s),t=r?"revenueNum".concat(a):"lossNum".concat(a),{servicingTime:l,charge:u}=p(a);o[r?"revenue":"loss"]+=u,o[t]++},T=(e,r)=>e.getTime()===r.getTime(),h=e=>{let{category:r}=e,s=c.filter(e=>!e.isFree&&e.isWalkIn&&e.type===r).length,a=c.filter(e=>e.isFree).length;return 0===s&&a>=1||s>0&&a-s>=1},C=e=>c.filter(e=>e.isFree).length+c.filter(r=>!r.isFree&&r.isWalkIn&&r.type===e).length>5,k=(e,r,s)=>{let{category:a}=e,t=c.find(e=>e.isFree&&(!s||!e.isWalkIn));t&&(r?(t.isFree=!1,t.type=a,t.timeWhenFree=new Date(e.apptDate.getTime()+6e4*p(d(a)).servicingTime),t.isWalkIn=s):(t.isFree=!0,t.type=null,t.timeWhenFree=null,t.isWalkIn=!1))},g=e=>{c.forEach(r=>{!r.isFree&&r.timeWhenFree&&e>=r.timeWhenFree&&(r.isFree=!0,r.type=null,r.timeWhenFree=null,r.isWalkIn=!1)})};return e.forEach(e=>{let{callDate:r,apptDate:s,category:a}=e;s.getDate()!==m.getDate()&&(o.date=m.toISOString().split("T")[0],u.push({...o}),o={...n},c.forEach(e=>{e.isFree=!0,e.type=null,e.timeWhenFree=null,e.isWalkIn=!1})),g(m=s),T(r,s)?h(e)?(k(e,!0,!0),v(e,!0),N(e,!0)):(v(e,!1),N(e,!1)):C(e)?(k(e,!0,!1),v(e,!0),N(e,!0)):(v(e,!1),N(e,!1))}),o.date=m.toISOString().split("T")[0],u.push({...o}),console.log(i),{TOTALREPORT:i,DAYREPORTARRAY:u}}},1585:function(e,r,s){"use strict";s.d(r,{w:function(){return t}});var a=s(9411);let t=async(e,r)=>{let s=[];try{let t=await (0,a.F)();r.setDate(r.getDate()+1),t.forEach(a=>{let t=a.apptDate;t>=e&&t<r&&s.push(a)})}catch(e){console.error("Error fetching or parsing CSV file:",e)}return s}},7015:function(){},8103:function(){}},function(e){e.O(0,[674,491,559,701,971,69,744],function(){return e(e.s=6981)}),_N_E=e.O()}]);