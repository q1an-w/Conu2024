(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{4481:function(e,r,t){Promise.resolve().then(t.bind(t,9646))},9646:function(e,r,t){"use strict";t.r(r);var l=t(3827);t(1515);var n=t(9411),i=t(4922),a=t(4090);r.default=()=>{let[e,r]=(0,a.useState)([]),[t,s]=(0,a.useState)([]),[u,c]=(0,a.useState)({});return(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,n.F)();console.log(e),r(e);let t=await (0,i.O)(e.slice(0,20));console.log(t)}catch(e){console.error("Error fetching or parsing CSV file:",e)}})()},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Date-sorted CSV Data"}),(0,l.jsx)("div",{children:" --------"}),(0,l.jsx)("ul",{children:e.slice(11,20).map((e,r)=>(0,l.jsx)("li",{style:{marginTop:"15px",fontSize:"20px"},children:"Call:         ".concat(e.callDate,", Appt:          ").concat(e.apptDate,", Vehicle Type:      ").concat(e.category)},r))})]})}},9411:function(e,r,t){"use strict";t.d(r,{F:function(){return i}});var l=t(6491),n=t.n(l);let i=async()=>{let e=await fetch("../database/datafile.csv"),r=await e.text(),t=new Blob([r],{type:"text/csv"}),l=new File([t],"sample.csv",{type:"text/csv"});return new Promise((e,r)=>{let t=new FileReader;t.onload=async t=>{let l=t.target.result;n().parse(l,{header:!1,dynamicTyping:!0,complete:r=>{let t=r.data.map(e=>({callDate:a(e[0]),apptDate:a(e[1]),category:e[2]}));t.sort((e,r)=>{let t=e.apptDate-r.apptDate;return 0!==t?t:e.callDate-r.callDate}),e(t)},error:e=>{r(e.message)}})},t.readAsText(l)})},a=e=>{if(!e)return null;let[r,t]=e.split(" "),[l,n,i]=r.split("-"),[a,s]=t.split(":");return new Date(l,n-1,i,a,s)}},4922:function(e,r,t){"use strict";t.d(r,{O:function(){return l}});let l=e=>{let r={servicingTime:30,charge:150},t={servicingTime:30,charge:150},l={servicingTime:30,charge:150},n={servicingTime:60,charge:250},i={servicingTime:120,charge:700},a=[],s={date:"",revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},u={revenue:0,loss:0,revenueNumSmallCar:0,revenueNumMediumCar:0,revenueNumBigCar:0,revenueNumTruck1:0,revenueNumTruck2:0,lossNumSmallCar:0,lossNumMediumCar:0,lossNumBigCar:0,lossNumTruck1:0,lossNumTruck2:0},c=[{id:1,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:2,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:3,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:4,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:5,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:6,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:7,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:8,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:9,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1},{id:10,isFree:!0,type:null,timeWhenFree:null,isWalkIn:!1}],m=e[0].apptDate,o={...s},p=e=>{switch(e.toLowerCase()){case"compact":return"SmallCar";case"medium":return"MediumCar";case"full-size":return"BigCar";case"class 1 truck":return"Truck1";case"class 2 truck":return"Truck2";default:return"UnknownCategory"}},h=e=>{switch(e){case"SmallCar":return r;case"MediumCar":return t;case"BigCar":return l;case"Truck1":return n;case"Truck2":return i;default:return{}}},d=(e,r)=>{let{category:t}=e,l=p(t),n=r?"revenueNum".concat(l):"lossNum".concat(l),{servicingTime:i,charge:a}=h(l);u[r?"revenue":"loss"]+=a,u[n]++},g=(e,r)=>{let{category:t}=e,l=p(t),n=r?"revenueNum".concat(l):"lossNum".concat(l),{servicingTime:i,charge:a}=h(l);o[r?"revenue":"loss"]+=a,o[n]++},F=(e,r)=>e.getTime()===r.getTime(),k=e=>{let{category:r}=e,t=c.filter(e=>!e.isFree&&e.isWalkIn&&e.type===r).length,l=c.filter(e=>e.isFree).length;return 0===t&&l>=1||t>0&&l-t>=1},W=e=>c.filter(e=>e.isFree).length+c.filter(r=>!r.isFree&&r.isWalkIn&&r.type===e).length>5,v=(e,r,t)=>{let{category:l}=e,n=c.find(e=>e.isFree&&(!t||!e.isWalkIn));n&&(r?(n.isFree=!1,n.type=l,n.timeWhenFree=new Date(e.apptDate.getTime()+6e4*h(p(l)).servicingTime),n.isWalkIn=t):(n.isFree=!0,n.type=null,n.timeWhenFree=null,n.isWalkIn=!1))},f=e=>{c.forEach(r=>{!r.isFree&&r.timeWhenFree&&e>=r.timeWhenFree&&(r.isFree=!0,r.type=null,r.timeWhenFree=null,r.isWalkIn=!1)})};return e.forEach(e=>{let{callDate:r,apptDate:t,category:l}=e;t.getDate()!==m.getDate()&&(o.date=m.toISOString().split("T")[0],a.push({...o}),o={...s},c.forEach(e=>{e.isFree=!0,e.type=null,e.timeWhenFree=null,e.isWalkIn=!1})),f(m=t),F(r,t)?k(e)?(v(e,!0,!0),g(e,!0),d(e,!0)):(g(e,!1),d(e,!1)):W(e)?(v(e,!0,!1),g(e,!0),d(e,!0)):(g(e,!1),d(e,!1))}),o.date=m.toISOString().split("T")[0],a.push({...o}),console.log(u),{TOTALREPORT:u,DAYREPORTARRAY:a}}}},function(e){e.O(0,[491,515,971,69,744],function(){return e(e.s=4481)}),_N_E=e.O()}]);